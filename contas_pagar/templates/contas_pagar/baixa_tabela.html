
{% extends "base.html" %}

{% block content %}

<div class="card shadow-sm">
    <div class="card-header bg-success text-white">
        <h3 class="card-title mb-0">
            <i class="fa fa-money-bill"></i> Baixa de Contas Selecionadas
        </h3>
    </div>

    <form method="POST" action="{% url 'contas_pagar_baixa_confirmar' %}">
        {% csrf_token %}

        <table class="table table-bordered table-striped mt-3">
            <thead>
                <tr>
                    <th>Descrição</th>
                    <th>Fornecedor</th>
                    <th>Valor da Conta</th>
                    <th>Data Pagamento</th>
                    <th>Valor Pago</th>
                </tr>
            </thead>
            <tbody>
                {% for conta in contas %}
                <tr>
                    <td>{{ conta.descricao }}</td>
                    <td>{{ conta.fornecedor }}</td>
                    <td>R$ {{ conta.valor }}</td>

                    <td>
                        <input type="date"
                               name="data_pagamento_{{ conta.id }}"
                               class="form-control"
                               value="{{ hoje }}">
                    </td>

                    <td>
                        <input type="text"
                               name="valor_pago_{{ conta.id }}"
                               class="form-control money"
                               value="{{ conta.valor }}">
                    </td>

                    <input type="hidden" name="contas" value="{{ conta.id }}">
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="card-footer text-right">
            <button class="btn btn-success">
                <i class="fa fa-check"></i> Confirmar Baixa
            </button>

            <a href="{% url 'contas_pagar_lista' %}" class="btn btn-secondary">
                Cancelar
            </a>
        </div>
    </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script>
$('.money').mask('000.000.000,00', {reverse: true});
</script>

{% endblock %}